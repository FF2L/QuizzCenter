Lưu ý là khi truyền dư hay truyền thiếu trường, sai định dạng trong body gửi 
đến be thì nó sẽ không nhận và ném lỗi hãy đọc lỗi trước khi nhắn tin

lấy tất cả môn học: vd khi tới trang 1 cần lấy 5 môn học đi thì ta truyền vào skip: 0 limit: 5 trang 2 là skip: 5 limit 5, tuong tự vậy.
Này là tùy chinh nếu không cungg cấp biến nào hết thì mặc định nó sẽ lấy 10 môn học đầu tiên trong database.
    get: localhost:3000/mon-hoc?skip=0&limit=10


lấy tất cả chương: nó sẽ sắp xếp theo trường thuTu lúc tạo. Gọi xong sẽ trả về danh sách chương thuộc môn học đó theo thứ tự
    get: localhost:3000/chuong
    body cần 
    {
        "idMonHoc": 1
    }

tạo chương: tên chương không bắt buộc phải là chương ghi gì thì nó hiện lên ccái đó, chương 1, chương 2, listen,abc,...
nếu trong môn học đó 5 chương(nghĩa là đã có trường thuTu 1->5) mà truyền vào chương mới hay gì đó có trường thuTu 1->5 thì các chương
trước đó trường thuTu sẽ được cộng dồn vd: chương mới có trường thuTu: 3 thì các chương trước đó thuTu:3 sẽ thành 4 tương tự các chương sau.
Tạo xong sẽ nhận về chương vừa tạo
    post: localhost:3000/chuong
    body cần:
    {
        "tenChuong": "chương 1: Học cách viết",
        "thuTu": 2,
        "idGiangVien": 2,
        "idMonHoc": 1
    }

cập nhật chuong: body nó cần có thể là tất cả các trường hoặc một hoặc nhiều trường trong body của cái tạo chuong, nghĩa là tùy chọn.
Tương tự như cái tạo chương khi update trường thuTu thì nó sẽ tự cập nhật trường thuTu trong database. Update xong nhận về sẽ là 
cái chương vừa update
    patch: localhost:3000/chuong/:id 
    body cần:
    {
        "tenChuong": "chương 1: Học cách viết",
        "thuTu": 2,
        "idGiangVien": 2,
        "idMonHoc": 1
    }
Có lấy chuong theo id
    get: localhost:3000/chuong/:id 

---------thêm sửa xóa Câu hỏi----------- lưu ý là tôi đã viết trigger cho phần số lượng câu hỏi rồi
nên khi insert hay update (chương id),delete thì số lượng của chương đó tự cập nhật nên cần tự xử  trên fe


tạo câu hỏi: lưu ý là loại câu hỏi phỉa truyền đúng kiểu: MotDung, NhieuDung nếu không truyền
loaiCauHoi thì mặc định nó là loại: MotDung. doKho cần truyền vào kiểu là: De, Kho
không truyền mặc định là De.  Lỗi khi mà nếu đáp án false hết thì báo lỗi, nếu loaiCauHoi la motdung à dapAnDung >1 thì báo lỗi
trả về cái câu hỏi + mảng đáp án
    post: localhost:3000/cau-hoi
    body cần : 
   {
    "tenHienThi": "Câu 1",
    "noiDungCauHoi": "2 + 2 = ?",
    "loaiCauHoi": "MotDung",
    "doKho": "Kho",
    "idChuong": 9,
    "mangDapAn": [
        { "noiDung": "3", "dapAnDung": true},
        { "noiDung": "4", "dapAnDung": false },
        { "noiDung": "5", "dapAnDung": false },
        { "noiDung": "6", "dapAnDung": false }
    ]
    }


lấy tất cả câu hỏi theo idchương: muốn lấy câu hỏi chương nào thì truyền
id của chương đó vào :id. Ở đây tôi build thêm query là skip, limit, doKho, loaiCauHoi
nếu muốn sử dụng bất cứ trường nào thì tùy chỉnh mà xài. Nếu không có truyền gì hết thì nó mặc định
lấy 10 cái câu hỏi mới nhất được tạo sắp xếp theo ngày tạo/update. Ở đây ông có thể chọn chương rồi nó hiện ra tất cả rồi 
lọc theo độ khó hoặc loại câu hỏi cho nó vui, tùy ông.

    get: localhost:3000/chuong/:idChuong/cau-hoi?loaiCauHoi=MotDung&doKho=De&limit=5&skip=5


update câu hỏi: body nó cần có thể là tất cả các trường hoặc một hoặc nhiều trường trong body của cái tạo câu hỏi, nghĩa là tùy chọn.
Tương tự như cái tạo chương khi update trường tên hiển thị thì nó sẽ tự cập nhật trường tên hiển thị trong database. Update xong nhận về sẽ là 
cái câu hỏi vừa update. Lưu ý là update câu hỏi sẽ ko cho update loaiCauHoi
    patch: localhost:3000/cau-hoi:id
    body cần : 
    {
        "tenHienThi": "câu hỏi test",
        "noiDungCauHoi": "abc",
        "doKho": "Kho",
        "idChuong":10
    }

//Tìm một câu hỏi theo Id: trả về  cauHoi và mảng danp91 án nên test trước để biết api ra sau
    get: localhost:3000/cau-hoi/:id
 

xóa câu hỏi: hiện tại là xóa luôn cho nó dễ sau này xóa kia sau cần id của câu hỏi cần xóa

    delete: localhost:3000/cau-hoi/:id


------thêm sửa xóa đáp an

Thêm một đáp án: khi thêm một đáp án đúng mà câu hỏi đó là một đúng thì đáp án đúng cũ sẽ tự update lại
    post: localhost:3000/dap-an/
    body cần: 
    {
        "noiDung": "adsasd",
        "dapAnDung": "sdfasdf",
        "idCauHoi" : 1
    }

update một đáp án: khi update một đáp án enú6 là câu hỏi một đúng, update câu hỏi sai thì câu hỏi đúng cũ sẽ tự update lại,
KHÔNG THỂ UPDATE idCauHoi

patch : localhost:3000/dap-an/
        {
        "noiDung": "adsasd",
        "dapAnDung": "sdfasdf",
    }
    
delete: không thể delete đáp án đúng của một câu hỏi một đúng cần update lại hoặc insert rồi hãy xóa

delete: localhost:3000/dap-an/:id

-----------Thêm câu hỏi bằng file---------------
tạo câu hỏi bằng file: Cứ lấy cái mẫu excel đính mà chơi, giới hạn 20mb 1 file.
post: localhost:3000/gui-file/cau-hoi/:idChuong

-------28/9/2025-----------
Có thể xóa chương nhưng chỉ xóa chương không có câu hỏi
Delete: localhost:3000/chuong/:id

sửa lại tạo câu hỏi: có thể upload ảnh kèm theo khi tạo câu hỏi và nếu có style thì gửi với dạng htnml lưu vào trường
noiDungCauHoiHTML để sau này render lấy đó render ra và noiDunCauHoi vẫn giữ nguyên vì sau này nó phục vụ cho tim kiếm. và tương tự đáp án cũng có noiDungHTML.
THeo tìm hiểu được thì fe có thể dùng dangerouslySetInnerHTML/[innerHTML] để hiển thị cái tôi đã lưu. 
Và dùng Quill (nhẹ, dễ tích hợp) CKEditor 5 (nhiều tính năng, bản build sẵn) để chuyển kiểu style trên web sang kiểu html rô gửi sang be này.
LƯU Ý LÀ PHẢI GỬI TẤT CẢ VỚI DẠNG FROM DATA
    post: localhost:3000/cau-hoi
    key gửi file: files
    key gửi dữ liệu tạo câu hỏi: createCauHoi
    {
    "tenHienThi": "Câu 1",
    "noiDungCauHoi": "2 + 2 = ?",
    "noiDungCauHoiHTML"
    "loaiCauHoi": "MotDung",
    "doKho": "Kho",
    "idChuong": 9,
    "mangDapAn": [
        { "noiDung": "3", noiDungHTML:"", dapAnDung": true},
        { "noiDung": "4", noiDungHTML:"", "dapAnDung": false },
        { "noiDung": "5", noiDungHTML:"", "dapAnDung": false },
        { "noiDung": "6", noiDungHTML:"", "dapAnDung": false }
    ]
    }

    update câu hỏi bây h có thể update luôn cả ảnh thuộc câu hỏi đó. bạn có thể thêm ảnh mới(gửi qua form data với key la files) 
    hoặc xóa ảnh củ(nếu xóa thì cần cung cấp mảng mangAnhPublicId hiện tại nó là mảng chuỗi trong object FileDinhKem publicId 
    vd trước đó có 3 ảnh mỗi ảnh có trường pubId lần lượt là pubId: "1", pubId: "2", pubId: "3" khi xóa cái ảnh thứ 3 thì khi gọi update
    thì cung cấp mảng mangAnhPublicId: bao gồm pubId: "1"."2")
    các trường update câu hỏi như ở dưới và không thể update lại loại câu hỏi được.
        patch: localhost:3000/cau-hoi:id
    body cần : 
    {
        "tenHienThi": "câu hỏi test",
        "noiDungCauHoi": "abc",
        "doKho": "Kho",
        "idChuong":10, 
        "mangAnhPublicId": ["imagesQuizzCenter/pi5otqn2cowtrer5jujq"]
    }


mấy cái như tạo và update đáp án đã thêm trường noiDungHTML nên có thể  thêm trương đó khi update hay tạo mới

hiện chưa thể uploadfile khi tao5 câu hỏi bằng file excel và chưa tạo câu hỏi với các kiểu file khác đính kèm( hiện tại chỉ ảnh)

khi tạo câu hỏi do không muốn phúc tạp vấn đề.




---------------------Ngày 3/10-------------------------------

lấy tất cả lớp học phần theo id giảng viên và id môn học 
    ở đây idGiangVien được đưa vào query để sau nay2 tái sử dụng được và nó sẽ lấy lớp học theo thời gian kết thúc >= thời gian hiện tại
    Get:localhost:3000/lop-hoc-phan/:idMonHoc?idGiangVien=2


lấy tất cả bài kiểm tra theo id lớp học phần sort theo cái mới tạo/ update được đưa lên trước
có query
Get: localhost:3000/bai-kiem-tra/:idLopHocPhan?loaiKiemTra=LuyenTap&xemBaiLam=true&hienThiKetQua=true

laý6 thông tin của một bài kiểm tra, có cả câu hỏi và đáp án
Get: localhost:3000/bai-kiem-tra/findone:idBaiKiemTra


tạo bài kiểm tra: nếu laoị kiểm tra là 2 kiểu : LuyenTap, BaiKiemTra. Nếu loại là BaiKiemTra thi số lần làm phải là 1.
thời gian bắt đầu/ kết thúc viết theo định dạng ở dưới là dược. thời gian làm chuyển sang giây: 90 phút => 5400 giây
Post: localhost:3000/bai-kiem-tra
body: {
      "tenBaiKiemTra": "bài kiểm tra 15p",
      "loaiKiemTra": "BaiKiemTra",
      "soLanLam": 1,
      "xemBaiLam": true,
      "hienThiKetQua": true,
      "thoiGianBatDau": "2025-10-03",
      "thoiGianKetThuc": "2025-10-04",
      "thoiGianLam": 5400,
      "idLopHocPhan": 1
}


cập nhật bài kiểm tra: các trường cần cập nhật y chang, nào cần cập nhật thì chỉ cần trường dó cung cấp idBaiKiemTra cần cập nhật
Patch: localhost:3000/bai-kiem-tra/:idBaiKiemTra
body: {
      "tenBaiKiemTra": "bài kiểm tra 15p",
      "loaiKiemTra": "BaiKiemTra",
      "soLanLam": 1,
      "xemBaiLam": true,
      "hienThiKetQua": true,
      "thoiGianBatDau": "2025-10-03",
      "thoiGianKetThuc": "2025-10-04",
      "thoiGianLam": 5400,
      "idLopHocPhan": 1
}

xóa bài kiểm tra :
Delete: localhost:3000/bai-kiem-tra/:idBaiKiemTra


QUẢN LÝ CÂU HỎI TRONG ĐỀ
Ý TƯỞNG LÀ THÊM CÂU HỎI BẰNG CÁCH THÊM THỦ CÔNG VÀ THÊM BẰNG CÁCH THÊM BẰNG NGÂN HÀNG CÂU HỎI. 
    THÊM THỦ CÔNG THÌ THÊM VÀO Y CHANG CÁI THÊM CÂU HỎI TRONG NGÂN HÀNG CÂU HỎI CÓ DIỀU KHÔNG
    CẦN IdChuong. SAU KHI THÊM THÌ GỌI API THÊM CÂU HỎI VÀO TRONG ĐỀ

    THÊM BẰNG NGÂN HÀNG CÂU HỎI THÌ LOAD CHUONG LÊN THÊM CÂU HỎI

lấy tất cả câu hỏi trong đề có phân trang:
get: localhost:3000/bai-kiem-tra/chi-tiet-cau-hoi/4?loaiKiemTra=LuyenTap&xemBaiLam=true&hienThiKetQua=true&skip=0&limit=5

thêm câu hỏi vào trong đê: ở đây thêm câu hỏi nào thì dưa id vào mảng
post: localhost:3000/bai-kiem-tra/chi-tiet-cau-hoi
{
    "idBaiKiemTra": 4,
    "mangIdCauHoi": [181,183]
}

update câu hỏi: câu hỏi gì hiện dang có trong đề thì cứ ghi vào mảng nếu xóa thì loại ra khỏi mảng, thêm mới thêm vào mảng
put: localhost:3000/bai-kiem-tra/chi-tiet-cau-hoi này trả vê danh sách câu hỏi sau khi update
{
    "idBaiKiemTra": 4,
    "mangIdCauHoi": [183]
}



